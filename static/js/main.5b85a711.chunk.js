(this.webpackJsonphackernews=this.webpackJsonphackernews||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},19:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n.n(r),o=n(11),i=n.n(o),c=(n(19),n(13)),h=n(4),u=n(5),l=n(1),m=n(8),S=n(9),v=n(2),b=n(6),d=n(7),p=n(3),y=n(12),f=n.n(y),E=(n(22),{NONE:function(e){return e},TITLE:function(e){return Object(p.sortBy)(e,"title")},AUTHOR:function(e){return Object(p.sortBy)(e,"author")},COMMENTS:function(e){return Object(p.sortBy)(e,"num_comments").reverse()},POINTS:function(e){return Object(p.sortBy)(e,"points").reverse()}}),O=function(e){Object(S.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={results:null,searchKey:"",searchTerm:"redux",isLoading:!1},a.needsToSearchTopstories=a.needsToSearchTopstories.bind(Object(l.a)(a)),a.setSearchTopstories=a.setSearchTopstories.bind(Object(l.a)(a)),a.fetchSearchTopstories=a.fetchSearchTopstories.bind(Object(l.a)(a)),a.onSearchChange=a.onSearchChange.bind(Object(l.a)(a)),a.onSearchSubmit=a.onSearchSubmit.bind(Object(l.a)(a)),a.onDismiss=a.onDismiss.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"needsToSearchTopstories",value:function(e){return!this.state.results[e]}},{key:"setSearchTopstories",value:function(e){var t=e.hits,n=e.page;this.setState(function(e,t){return function(n){var a=n.searchKey,r=n.results,s=r&&r[a]?r[a].hits:[],o=[].concat(Object(d.a)(s),Object(d.a)(e));return{results:Object(b.a)({},r,Object(v.a)({},a,{hits:o,page:t})),isLoading:!1}}}(t,n))}},{key:"fetchSearchTopstories",value:function(e,t){var n=this;this.setState({isLoading:!0}),fetch("".concat("https://hn.algolia.com/api/v1").concat("/search","?").concat("query=").concat(e,"&").concat("page=").concat(t,"&").concat("hitsPerPage=").concat("100")).then((function(e){return e.json()})).then((function(e){return n.setSearchTopstories(e)}))}},{key:"componentDidMount",value:function(){var e=this.state.searchTerm;this.setState({searchKey:e}),this.fetchSearchTopstories(e,0)}},{key:"onSearchSubmit",value:function(e){var t=this.state.searchTerm;this.setState({searchKey:t}),this.needsToSearchTopstories(t)&&this.fetchSearchTopstories(t,0),e.preventDefault()}},{key:"onSearchChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"onDismiss",value:function(e){var t=this.state,n=t.searchKey,a=t.results,r=a[n],s=r.hits,o=r.page,i=s.filter((function(t){return t.objectID!==e}));this.setState({results:Object(b.a)({},a,Object(v.a)({},n,{hits:i,page:o}))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchTerm,a=t.results,r=t.searchKey,o=t.isLoading,i=a&&a[r]&&a[r].page||0,c=a&&a[r]&&a[r].hits||[];return s.a.createElement("div",{className:"page"},s.a.createElement("div",{className:"interactions"},s.a.createElement(T,{value:n,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit},"Search")),s.a.createElement(j,{list:c,onDismiss:this.onDismiss}),s.a.createElement("div",{className:"interactions"},s.a.createElement(K,{isLoading:o,onClick:function(){return e.fetchSearchTopstories(r,i+1)}},"More")))}}]),n}(r.Component),T=function(e){var t=e.value,n=e.onChange,a=e.onSubmit,r=e.children;return s.a.createElement("form",{onSubmit:a},s.a.createElement("input",{type:"text",value:t,onChange:n}),s.a.createElement("button",{type:"submit"},r))},j=function(e){Object(S.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={sortKey:"NONE",isSortReverse:!1},a.onSort=a.onSort.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"onSort",value:function(e){var t=this.state.sortKey===e&&!this.state.isSortReverse;this.setState({sortKey:e,isSortReverse:t})}},{key:"render",value:function(){var e=this.props,t=e.list,n=e.onDismiss,a=this.state,r=a.sortKey,o=a.isSortReverse,i=E[r](t),c=o?i.reverse():i;return s.a.createElement("div",{className:"table"},s.a.createElement("div",{className:"table-header"},s.a.createElement("span",{style:{width:"40%"}},s.a.createElement(g,{sortKey:"TITLE",onSort:this.onSort,activeSortKey:r},"Title")),s.a.createElement("span",{style:{width:"30%"}},s.a.createElement(g,{sortKey:"AUTHOR",onSort:this.onSort,activeSortKey:r},"Author")),s.a.createElement("span",{style:{width:"10%"}},s.a.createElement(g,{sortKey:"COMMENTS",onSort:this.onSort,activeSortKey:r},"Comments")),s.a.createElement("span",{style:{width:"10%"}},s.a.createElement(g,{sortKey:"POINTS",onSort:this.onSort,activeSortKey:r},"Points")),s.a.createElement("span",{style:{width:"10%"}},"Archive")),c.map((function(e){return s.a.createElement("div",{key:e.objectID,className:"table-row"},s.a.createElement("span",{style:{width:"40%"}},s.a.createElement("a",{href:e.url},e.title)),s.a.createElement("span",{style:{width:"30%"}},e.author),s.a.createElement("span",{style:{width:"10%"}},e.num_comments),s.a.createElement("span",{style:{width:"10%"}},e.points),s.a.createElement("span",{style:{width:"10%"}},s.a.createElement(k,{onClick:function(){return n(e.objectID)},className:"button-inline"},"Dismiss")))})))}}]),n}(r.Component),g=function(e){var t=e.sortKey,n=e.activeSortKey,a=e.onSort,r=e.children,o=f()("button-inline",{"button-active":t===n});return s.a.createElement(k,{onClick:function(){return a(t)},className:o},r)},k=function(e){var t=e.onClick,n=e.className,a=void 0===n?"":n,r=e.children;return s.a.createElement("button",{onClick:t,className:a,type:"button"},r)},w=function(){return s.a.createElement("div",null,"Loading ...")},K=(a=k,function(e){var t=e.isLoading,n=Object(c.a)(e,["isLoading"]);return t?s.a.createElement(w,null):s.a.createElement(a,n)}),N=O;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[14,1,2]]]);
//# sourceMappingURL=main.5b85a711.chunk.js.map